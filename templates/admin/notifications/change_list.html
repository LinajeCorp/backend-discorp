{% extends "admin/change_list.html" %}

{% block content_title %}
    <h1>ðŸ“‹ Historial de Notificaciones Push</h1>
{% endblock %}

{% block object-tools %}
    <ul class="object-tools">
        <li>
            <a href="{% url 'admin:send_notification' %}" class="addlink">
                ðŸ”” Enviar Nueva NotificaciÃ³n
            </a>
        </li>
        {% if perms.notifications.add_notificationhistory %}
        <li>
            <a href="{% url 'admin:notification_history' %}" class="viewlink">
                ðŸ“ˆ Historial Detallado
            </a>
        </li>
        {% endif %}
    </ul>
{% endblock %}

{% block result_list %}
    <!-- Panel de estadÃ­sticas rÃ¡pidas -->
    <div class="stats-dashboard">
        <div class="stat-item">
            <h3 class="stat-number stat-primary">{{ total_notifications|default:0 }}</h3>
            <p class="stat-description">Total Notificaciones</p>
        </div>
        <div class="stat-item">
            <h3 class="stat-number stat-success">{{ sent_today|default:0 }}</h3>
            <p class="stat-description">Enviadas Hoy</p>
        </div>
        <div class="stat-item">
            <h3 class="stat-number stat-warning">{{ total_devices|default:0 }}</h3>
            <p class="stat-description">Dispositivos Activos</p>
        </div>
    </div>

    <!-- Botones de acceso rÃ¡pido -->
    <div class="action-buttons">
        <a href="{% url 'admin:send_notification' %}" class="btn btn-primary">
            ðŸš€ Enviar NotificaciÃ³n
        </a>
        <a href="{% url 'admin:fcm_django_fcmdevice_changelist' %}" class="btn btn-success">
            ðŸ“± Ver Dispositivos
        </a>
        <a href="{% url 'admin:notification_history' %}" class="btn btn-secondary">
            ðŸ“Š Historial Detallado
        </a>
    </div>

    {{ block.super }}

<style>
/* Estilos para el dashboard de notificaciones que respetan el tema dark/light */
.stats-dashboard {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    padding: 15px;
    background: var(--darkened-bg, #f8f9fa);
    border-radius: 8px;
    border: 1px solid var(--hairline-color, #dee2e6);
    flex-wrap: wrap;
}

.stat-item {
    flex: 1;
    text-align: center;
    min-width: 120px;
}

.stat-number {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
}

.stat-primary {
    color: var(--primary, #007bff);
}

.stat-success {
    color: var(--success-fg, #28a745);
}

.stat-warning {
    color: var(--warning-fg, #ffc107);
}

.stat-description {
    margin: 5px 0 0 0;
    color: var(--body-quiet-color, #6c757d);
    font-size: 12px;
}

.action-buttons {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.btn {
    display: inline-block;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 5px;
    font-weight: 500;
    border: 1px solid transparent;
    transition: all 0.2s ease;
}

.btn-primary {
    background: var(--primary, #007bff);
    color: var(--primary-fg, #fff);
    border-color: var(--primary, #007bff);
}

.btn-success {
    background: var(--success-fg, #28a745);
    color: #fff;
    border-color: var(--success-fg, #28a745);
}

.btn-secondary {
    background: var(--close-button-bg, #6c757d);
    color: var(--close-button-fg, #fff);
    border-color: var(--close-button-bg, #6c757d);
}

.btn:hover {
    opacity: 0.8;
    color: #fff;
    text-decoration: none;
}

/* Responsive */
@media (max-width: 768px) {
    .stats-dashboard {
        flex-direction: column;
        text-align: center;
    }
    
    .stat-item {
        margin-bottom: 10px;
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .btn {
        text-align: center;
        margin-bottom: 5px;
    }
}
</style>
{% endblock %}
